# 테이블 인덱스 설계 및 장점 보고서

---

## 1. 개요

ConcertItem, Seat, Reservation 테이블의 인덱스 설계는 데이터 조회 성능을 최적화하고 검색 연산의 효율성을 높이기 위해 구현되었습니다.
테이블에서 빈번히 조회되는 컬럼에 인덱스를 설정하여 데이터베이스의 처리 속도를 개선하고, 시스템 확장성과 사용자 경험을 향상할 수 있습니다.

---

## 2. 각 테이블의 인덱스 설계 및 목적

### 2.1 ConcertItem 테이블

- 설정된 인덱스 (단일)

```
@Table(name = "CONCERTITEM_TABLE", indexes = {
@Index(name = "idx_concertId", columnList = "concertId")
})
```

- 인덱스 목적

    - 목적: 특정 콘서트와 관련된 데이터를 빠르게 조회하기 위해 설정.

    - 사용 예시: concertId를 기반으로 콘서트의 날짜 또는 세부 정보를 조회하는 쿼리에서 성능 최적화.

    - 장점:
        - concertId로 검색 시 쿼리 실행 시간 단축.
        - 데이터 스캔 범위를 줄여 읽기 I/O 비용 절감.

---

### 2.2 Seat 테이블

- 설정된 인덱스 (단일)

```
@Table(name = "SEAT_TABLE", indexes = {
@Index(name = "idx_concert_item_id", columnList = "concert_item_id")
})
```

- 인덱스 목적

    - 목적: 특정 콘서트 아이템에 속한 좌석 데이터를 빠르게 검색하기 위해 설정.

    - 사용 예시: concert_item_id를 기반으로 해당 콘서트의 좌석 정보(번호, 가격, 상태 등)를 조회하는 쿼리에서 활용.

    - 장점:

        - 대규모 데이터셋에서 특정 콘서트의 좌석 정보를 조회할 때 검색 속도 향상.
        - JOIN 연산 시 성능 최적화: Reservation 테이블과의 연결 작업에서 빠른 매칭 지원.

---

### 2.3 Reservation 테이블

- 설정된 인덱스 (단일)

```
@Table(name = "RESERVATION_TABLE", indexes = {
@Index(name = "idx_user_id", columnList = "user_id")
})
```

- 인덱스 목적

    - 목적: 특정 사용자와 관련된 예약 데이터를 빠르게 조회하기 위해 설정.

    - 사용 예시: user_id를 기반으로 사용자의 예약 내역(좌석 ID, 가격, 상태 등)을 검색하는 쿼리에서 활용.

    - 장점:

        - 특정 사용자와 관련된 대규모 예약 데이터를 처리할 때 효율적 검색 가능.
        - 사용자 단위 통계 생성이나 예약 내역 표시 기능에서 성능 최적화.

---

## 3. 인덱스를 걸었을 때의 장점

### 3.1 쿼리 성능 향상

- 인덱스를 사용하면 데이터베이스는 전체 테이블을 스캔하는 대신, 인덱스 트리를 사용하여 특정 데이터 위치를 빠르게 탐색할 수 있습니다.
- 특히, 대규모 데이터셋에서 WHERE 조건, JOIN, ORDER BY 등에 기반한 쿼리 성능이 크게 향상됩니다.

---

### 3.2 확장성 증가

대량의 데이터를 처리하는 시스템에서도 조회 성능을 안정적으로 유지할 수 있어 시스템 확장성이 향상됩니다.

---

## 4. 테스트

각 데이터 1000000건씩 생성 후 테스트 (k6 활용)

- 인덱스 추가 전

| **조회**    | **좌석**   | **예매**   | **콘서트 날짜** |
|-----------|----------|----------|------------|
| **조회 시간** | 평균 650ms | 평균 500ms | 평균 300ms   |

- 인덱스 추가 후

| **조회**    | **좌석**  | **예매**   | **콘서트 날짜** |
|-----------|---------|----------|------------|
| **조회 시간** | 평균 65ms | 평균 100ms | 평균 90ms    |

---

## 5. 결론

테이블의 **concertId, concert_item_id, user_id**에 적절히 인덱스를 설정함으로써, 데이터 조회 성능과 쿼리 처리 속도를 크게 개선할 수 있었습니다.
특히, 대규모 데이터셋을 처리하는 환경에서 인덱스는 효율적인 검색, JOIN 성능 향상, 사용자 경험 개선에 기여합니다.
추후 시스템 사용 패턴을 분석하여 인덱스를 추가적으로 최적화할 여지가 있을 것입니다.